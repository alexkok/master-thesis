% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
% Chapter: Property definitions
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\chapter{Properties of Rebel}
\label{cpt:properties}
% Definition: An Axiom is a mathematical statement that is assumed to be true.
% ( http://www.aaaknow.com/lessonFull.php?slug=propsCommAssoc )
% Sources:
% Axioms in algebra â€” where did they come from?
% http://www.jstor.org.proxy.uba.uva.nl:2048/stable/pdf/27956337.pdf?refreqid=excelsior%3A623b1c85f79f8cd18bc9d09560339b9b
% (simple formulas, history, and explanations)
% A perspective on the algebra of logic
% http://www-tandfonline-com.proxy.uba.uva.nl:2048/doi/pdf/10.2989/16073606.2011.622856?needAccess=true
% (More formulas, deeper explanations)
% Might contain more properties

% Another source was (but not a paper or so)
% http://www.aaamath.com/ac22.htm


% Another good source (book)
% Calculus, Vol. 1: One-Variable Calculus, with an Introduction to Linear Algebra 2nd Edition
% Great source (overview): http://www.doe.virginia.gov/instruction/mathematics/resources/va_algebraic_properties.pdf

\pinfo{Specific types in Rebel}
\textit{Rebel} introduces custom types, like \textit{IBAN}, \textit{Percentage}
and \textit{Money} and allows operations on those~\cite{stoel2016solving}. But
what are the expected properties of the generator? In this chapter, we will try
to answer the first research question:
\begin{description}
	\item [~~~~RQ 1:] \rqOne
\end{description}
To answer this question, we first describe a way how we can determine the
properties. Followed by the property definitions that will be used throughout
this thesis, with a motivation why these properties are expected to hold. The
properties that are defined in this chapter will be used in our experiments
(\autoref{cpt:experiment1}, \autoref{cpt:experiment2} and
\autoref{cpt:experiment3}).

%\todo[inline]{Percentage? Not yet, defining those requires properties again. And running the test suite again, evaluate again, etc.\\
%Describe what exactly is Percentage if we define it in a specification, which rules does it inherit?\\
%Percentage (expected): 2/more decimals, however its a precise amount. Calculating with it is expected in a result of the real value.\\
%Percentage (current): As it is defined now: full number, it can exceed 100. However it does not support decimals yet.}

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
% Section: Determining the properties
\section{Determining the properties}
\pinfo{Properties not defined for Rebel. We must define these}
Currently, there are no definitions available of which properties are expected
in \textit{Rebel}. Due to the missing definitions of these types, it means that
we first have to define what the expected properties
on these types are and substantiate these. Only then we can determine whether
the generator is working as expected with these properties.\\
\\
There are many operations available among the available types in \textit{Rebel}.
We are not able to define all the properties that exist in the \textit{Rebel}
language, because this is not effective for the scope of this thesis. Our goal
is to show that this approach works. Next, one can write all the relevant properties
down and use the test framework to test these properties automatically. During
this thesis we will focus on the \textit{Money} type, considering this is the
most important type for a bank and has the highest priority to be implemented
correctly.\\
\\
\pinfo{Types and axioms}
For types like \textit{Integer}, the axioms of algebra can be used as inspiration to determine whether
the implementation is correct. An \textit{Integer} in \textit{Rebel} is most likely translated to an \textit{Integer} in
the generated system too, with perhaps the expectation that these have the same
properties in \textit{Scala}. However, it is not possible to rely on the
\textit{Integer} definition of a specific language. Because another generator
might generate a system in another language or might implement it differently in
the same language. Would that mean that the properties of that other language
should now hold on the \textit{Integer} type? Well, as this is not defined for
\textit{Rebel}, this is unknown. In this chapter, we will define properties that
are expected to hold when using the \textit{Money} type in \textit{Rebel}. The
properties that we define are based on the known axioms in
algebra~\cite{baumgart1961axioms,raftery2011perspective,apostol2007calculus}. We
provide an explanation of why a certain property is expected in
\textit{Rebel}.\\
\\
\pinfo{Amount, not floating-point arithmetic}
The \textit{Money} type can be seen as a currency with an amount value. The
amount of a \textit{Money} value can have multiple decimals depending on the
currency. Thus, the amount can be seen as a floating number. Does this mean that
it inherits the computational properties of Floating-Point Arithmetic, as defined
in the IEEE standards 754 or 854? Since the \textit{Rebel} is intended to be a
formal specification language for banking products, we don't expect that the
described problems with this arithmetic are intended to exist on the
\textit{Money} type. Considering high volume flows within a bank in terms
of \textit{Money}, using the Floating-Point Arithmetic properties can result in
the known precision, overflow and underflow errors as described
in~\cite{goldberg1991every}. Such errors could be avoided by using the
\textit{Money} type. The author of~\cite{fowler2002patterns} also describes that
the intention of the \textit{Money} type is to avoid this:
\begin{quote}
	``You should absolutely avoid any kind of floating point type, as that will
	introduce the kind of rounding problems that Money is intended to avoid.''
    -- Martin Fowler~\cite{fowler2002patterns}
		%[p. 462] % Of pdf, ebook thing doesn't have page numbers
\end{quote}
%
\pinfo{Money operations, expecting division problem}
In~\cite{fowler2002patterns} the operations that can be done with the
\textit{Money} type are described, which are: \textit{+}, \textit{-},
\textit{*}, \textit{allocate}, \textit{$<$}, \textit{$>$}, \textit{$\leq$},
\textit{$\geq$} and \textit{=}. Where the allocate method is used instead of the
division~(/) operation. This is due to the division problem, requiring a number
to be rounded off at a certain time. For example, when splitting 1 EUR by 3,
each part would be 33 cents with the consensus of two decimals. However, what is done with the last cent
that is left? This is the problem that is being solved by the allocate method,
representing the ratio in which the rest amount should be allocated (where the last
cent would go to in this case)~\cite{fowler2002patterns}. The \textit{allocate}
method is a thing that \textit{Rebel} does not have, instead, it just allows the
use of the division operator. Because of this, we expect the division problem to
occur while running the test framework.\\
\\
The amount of a \textit{Money} value is
often rounded when it is being represented to the user, as it could have many
decimals. The representation of the \textit{Money} value is up to the business
on how this is done, as there are multiple factors influencing this. Instead, we
only focus on the internal value that is used when operating with the
\textit{Money} type.\\
\\
\pinfo{Not between different currencies}
It is unsupported to use operations on \textit{Money} values when using values
that are of different currencies. This could be done by taking the exchange
rates into account, as described in~\cite{fowler2002patterns}. However, this is
not implemented in \textit{Rebel} yet and thus it is unsupported to use
operations on it when using different currencies.\\
\\
\pinfo{Equality, currency overrules}
When using equality both the currency and the amount are taken into account,
which should be equal for both variables. In case of different currencies, it is
not considered equal, even if the amount would be equal.\\
\\
\pinfo{Thus: precise value, rounding only for division}
We say that the amount of a \textit{Money} value in \textit{Rebel} should hold
the exact value as if we would calculate the same expression by ourselves. The
representation of the \textit{Money} value to the customer is up to the
business.

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
% Section: Property definitions
\section{Property definitions}
\label{sct:properties_property_definitions}
\pinfo{Properties based on known axioms, but has restrictions}
The properties that we define are based on the known axioms in algebra, although
not every property is relevant or holds for each type in \textit{Rebel}.\\
$\land\lor$
\\
For example, it isn't possible to multiply two
\textit{Money} types with each other in order to support the multiplicative
property. It is unknown to which dimension ``\textit{Money} squared'' belongs,
this does not occur in the financial domain. Because of this, detecting this
prevents such mistakes. When this is accidentally defined in the \textit{Rebel}
specification, the type checker would detect and report this as an error.
Division has a similar case, as something cannot be divided a \textit{Money}
type.\\
\\
Instead we can use these operations with \textit{Money} in combination with
other types, such as \textit{Integer} and \textit{Percentage}. The type checker
for \textit{Rebel} will be used to determine these combinations. Due to this,
one property definition can lead to different possible combinations which can be
used. This results in multiple property definitions when using different types,
for each definition a unique name is being defined to identify each separate
property definition.\\
\\
We can separate the properties into two categories: ``Field properties'' and
``Properties of equality and inequality''. In the following sections we describe
these categories in detail along with the properties in the category. These
property definitions will be used throughout the thesis. Additionally we will
describe some property definitions that were added to this list of properties in
the third experiment (\autoref{cpt:experiment3}).

% % % % % % % % % % % % %
% Subsection: Field properties
\subsection{Field properties}
\label{ssct:properties_definitions_fieldproperties}
The field properties define the behaviour of addition, multiplication, subtraction and division on rational and real numbers\footnote{\url{https://en.wikipedia.org/wiki/Field_(mathematics)}}. As described
in~\cite{apostol2007calculus}, such operations can be used to determine the sum and the product of such values:
\begin{quote}
	``Along with the set \textbf{R} of real numbers we assume the existence of two operations called
	\textit{addition} and \textit{multiplication}, such that for every pair of real numbers x and y we can form the
	\textit{sum} of x and y, which is another real number denoted by x + y, and the \textit{product} of x and y,
	denoted by xy or by x . y.''
	-- Tom M. Apostol~\cite{apostol2007calculus}
\end{quote}
These operations are also available
when using the \textit{Money} type in \textit{Rebel} and are expected to apply
these operations on the amount value\footnote{We do not claim that the \textit{Money} type in \textit{Rebel} is a field. As it does not support each described operation when only using \textit{Money}. Instead, we use the field definitions to determine the properties on the \textit{Money} type.}. However, not every combination is possible
in \textit{Rebel} when it comes to using these operations. This is because \textit{Rebel} does not support certain combinations. We define the following properties in this category:

% % % % % % % % % % % % %
% Subsection: Associativity
\subsection*{Associativity}
\label{ssct:properties_associativity}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                                 & \textbf{Property name}               & \textbf{Variable (Type)}    \\ \hline
\rowcolor[HTML]{EFEFEF} $(x + y) + z \equiv x + (y + z)$                 & associativeAddition                  & $x$ : Money                 \\
\rowcolor[HTML]{EFEFEF}                                                  &                                      & $y$ : Money                 \\
\rowcolor[HTML]{EFEFEF}                                                  &                                      & $z$ : Money                 \\
                        $(x \cdot y) \cdot z \equiv x \cdot (y \cdot z)$ & associativeMultiplicationInteger1    & $x$ : Integer               \\
                                                                         &                                      & $y$ : Integer               \\
                                                                         &                                      & $z$ : Money                 \\
\rowcolor[HTML]{EFEFEF} $(x \cdot y) \cdot z \equiv x \cdot (y \cdot z)$ & associativeMultiplicationInteger2    & $x$ : Money                 \\
\rowcolor[HTML]{EFEFEF}                                                  &                                      & $y$ : Integer               \\
\rowcolor[HTML]{EFEFEF}                                                  &                                      & $z$ : Integer               \\
                        $(x \cdot y) \cdot z \equiv x \cdot (y \cdot z)$ & associativeMultiplicationPercentage1 & $x$ : Money                 \\
                                                                         &                                      & $y$ : Percentage            \\
                                                                         &                                      & $z$ : Integer               \\
\rowcolor[HTML]{EFEFEF} $(x \cdot y) \cdot z \equiv x \cdot (y \cdot z)$ & associativeMultiplicationpercentage2 & $x$ : Integer               \\
\rowcolor[HTML]{EFEFEF}                                                  &                                      & $y$ : Money                 \\
\rowcolor[HTML]{EFEFEF}                                                  &                                      & $z$ : Percentage            \\ \hline
\end{tabular}
\caption{Associativity when using \textit{Money}}
\label{tbl:ch4_money_associativity}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
The law of associativity is known on addition and
multiplication~\cite{baumgart1961axioms}. It defines that the order in which
certain operations are done does not affect the result of the whole expression.
In \autoref{tbl:ch4_money_associativity} we define possible combinations for this
property, which are accepted by the type checker of \textit{Rebel}.
\clearpage % FORCE PAGE BREAK
% % % % % % % % % % % % %
% Subsection: Non-associativity
\subsection*{Non-associativity}
\label{ssct:properties_nonassociativity}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}               & \textbf{Property name} & \textbf{Variable (Type)}    \\ \hline
\rowcolor[HTML]{EFEFEF} $(x - y) - z \neq x - (y - z)$ & nonassociativity       & $x$ : Money                 \\
\rowcolor[HTML]{EFEFEF}                                &                        & $y$ : Money                 \\
\rowcolor[HTML]{EFEFEF}                                &                        & $z$ : Money                 \\ \hline
\end{tabular}
\caption{Non-associativity when using \textit{Money}}
\label{tbl:ch4_money_nonassociativity}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
% in tegenstelling tot steen is geen steen stoep
In contrast to associativity (\nameref{ssct:properties_associativity}),
non-associativity describes that the order of the arguments does affect the
result of the whole expression. As we can see in
\autoref{tbl:ch4_money_nonassociativity} subtraction is a relation where this
property holds. An exception to this would be when each argument is zero.

% % % % % % % % % % % % %
% Subsection: Commutativity
\subsection*{Commutativity}
\label{ssct:properties_commutativity}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula} & \textbf{Property name}               & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x + y \equiv y + x$   & commutativeAddition                  & $x$ : Money                 \\
\rowcolor[HTML]{EFEFEF}                  &                                      & $y$ : Money                 \\
                        $x \cdot y \equiv y \cdot x$   & commutativeMultiplicationInteger1    & $x$ : Integer               \\
                                         &                                      & $y$ : Money                 \\
\rowcolor[HTML]{EFEFEF} $x \cdot y \equiv y \cdot x$   & commutativeMultiplicationInteger2    & $x$ : Money                 \\
\rowcolor[HTML]{EFEFEF}                  &                                      & $y$ : Integer               \\
                        $x \cdot y \equiv y \cdot x$   & commutativeMultiplicationPercentage1 & $x$ : Percentage            \\
                                         &                                      & $y$ : Money                 \\
\rowcolor[HTML]{EFEFEF} $x \cdot y \equiv y \cdot x$   & commutativeMultiplicationpercentage2 & $x$ : Money                 \\
\rowcolor[HTML]{EFEFEF}                  &                                      & $y$ : Percentage            \\ \hline
\end{tabular}
\caption{Commutativity when using \textit{Money}}
\label{tbl:ch4_money_commutativity}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
These properties are based on the commutative law~\cite{baumgart1961axioms}.
The result of an addition or multiplication does not vary when swapping the
input variables. Because of the \textit{Money} type, we can only do addition on
\textit{Money} values with other \textit{Money} values. As described in earlier, it is not possible to
multiply two \textit{Money} variables with each other, but it is possible to multiply it by
an \textit{Integer} or \textit{Percentage}. Also in this case, the order
shouldn't matter if we would put the \textit{Money} value as the first input
parameter to multiplication or the other way around.

% % % % % % % % % % % % %
% Subsection: Anticommutativity
\subsection*{Anticommutativity}
\label{ssct:properties_anticommutativity}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}        & \textbf{Property name} & \textbf{Variable (Type)}    \\ \hline
\rowcolor[HTML]{EFEFEF} $x - y \equiv -(y - x)$ & anticommutativity      & $x$ : Money                 \\
\rowcolor[HTML]{EFEFEF}                         &                        & $y$ : Money                 \\ \hline
\end{tabular}
\caption{Anticommutativity when using \textit{Money}}
\label{tbl:ch4_money_anticommutativity}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
\nameref{ssct:properties_commutativity} described the commutative properties.
Note that the properties in \nameref{ssct:properties_commutativity} only use
addition and multiplication. Subtraction is an operation that is anticommutative
as swapping the order of the two arguments is negates the result. The
anticommutative property thus negates the result of swapping the two arguments,
intending to result in the actual value again, as shown in
\autoref{tbl:ch4_money_anticommutativity}.
% % % % % % % % % % % % %
% Subsection: Identity
\subsection*{Identity}
\label{ssct:properties_identity}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}     & \textbf{Property name}  & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x + 0 \equiv x$     & additiveIdentity1       & $x$ : Money              \\
						            $0 + x \equiv x$     & additiveIdentity2       & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF} $x \cdot 1 \equiv x$ & multiplicativeIdentity1 & $x$ : Money              \\
                        $1 \cdot x \equiv x$ & multiplicativeIdentity2 & $x$ : Money              \\ \hline
\end{tabular}
\caption{Identity when using \textit{Money}}
\label{tbl:ch4_money_identity}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
The identity relation describes a function that returns the same value as the
value that was given as input. For additivity, this entails the addition of zero
to the input value and for multiplicativity, this entails multiplying the value
by 1. Also, the \nameref{ssct:properties_commutativity} property holds here, as
the order does not matter in which this function is applied. Since it is not
possible to just add 0 to a \textit{Money} value, the 0 showed in
\autoref{tbl:ch4_money_identity} must be defined in a \textit{Money} format.
Thus it must have the same currency as the parameter, with the amount of 0. The
\textit{Integer} type can be used for multiplication.

% % % % % % % % % % % % %
% Subsection: Inverse
\subsection*{Inverse}
\label{ssct:properties_inverse}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}    & \textbf{Property name} & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x + (-x) \equiv 0$ & additiveInverse1       & $x$ : Money              \\
                        $(-x) + x \equiv 0$ & additiveInverse2       & $x$ : Money              \\ \hline
\end{tabular}
\caption{Inverse when using \textit{Money}}
\label{tbl:ch4_money_inverse}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
The inverse relation describes (for additivity) that using addition with the
input parameter and the negative of the input parameter, results in the value
zero. Note that the operation is used on the \textit{Money} type, so the
expected value is 0 with the same currency as the currency of the input
parameter. Although the inverse relation could also be used with multiplication
and division (defined as \code{x*(1/x) == 0}), it is not possible to use this
definition in our case. As we cannot divide something by a \textit{Money}
type, which is why we only define the inverse relation using addition.
\clearpage % FORCE PAGE BREAK
% % % % % % % % % % % % %
% Subsection: Distributivity
\subsection*{Distributivity}
\label{ssct:properties_distributivity}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                               & \textbf{Property name}  & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x \cdot (y + z) \equiv x \cdot y + x \cdot z$ & distributiveInteger1    & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                &                         & $y$ : Integer            \\
\rowcolor[HTML]{EFEFEF}                                                &                         & $z$ : Integer            \\
                        $(y + z) \cdot x \equiv y \cdot x + z \cdot x$ & distributiveInteger2    & $x$ : Integer            \\
                                                                       &                         & $y$ : Money              \\
                                                                       &                         & $z$ : Money              \\
\rowcolor[HTML]{EFEFEF} $x \cdot (y + z) \equiv x \cdot y + x \cdot z$ & distributivePercentage1 & $x$ : Percentage         \\
\rowcolor[HTML]{EFEFEF}                                                &                         & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                &                         & $z$ : Money              \\
                        $(y + z) \cdot x \equiv y \cdot x + z \cdot x$ & distributivePercentage2 & $x$ : Percentage         \\
                                                                       &                         & $y$ : Money              \\
                                                                       &                         & $z$ : Money              \\ \hline
\end{tabular}
\caption{Distributivity when using \textit{Money}}
\label{tbl:ch4_money_distributivity}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
The law of distributivity is another well-known law~\cite{baumgart1961axioms}.
Unlike \nameref{ssct:properties_associativity}, the order does matter here when
using different operations. These operations can be used on \textit{Money} and
since we can see \textit{Money} as a number, this property is also expected on
this type. Remember that it is not possible to multiply \textit{Money} types
with each other.
Thus the variable types are an important part of these properties, in
\autoref{tbl:ch4_money_distributivity} property definitions are shown based on
this property.

% % % % % % % % % % % % %
% Subsection: Properties of equality and inequality
\subsection{Properties of equality and inequality}
\label{ssct:properties_definitions_equalityproperties}
The properties in this category are mainly using the equality (==, !=) and
inequality ($<$, $>$, $\leq$, $\geq$) operators in their definitions. For the
property names we abbreviate these operations with the naming \textit{LT},
\textit{GT}, \textit{LET} and \textit{GET} respectively. The following
property definitions belong to this category:

% % % % % % % % % % % % %
% Subsection: Property of Zero
\subsection*{Property of Zero}
\label{ssct:properties_propertyofzero}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}     & \textbf{Property name}      & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x \cdot 0 \equiv 0$ & multiplicativeZeroProperty1 & $x$ : Money              \\
                        $0 \cdot x \equiv 0$ & multiplicativeZeroProperty2 & $x$ : Money              \\ \hline
\end{tabular}
\caption{Property of Zero when using \textit{Money}}
\label{tbl:ch4_money_propertyzero}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
The property of zero on multiplication states that if something is multiplied
by zero, the result will always be zero. Since \textit{Rebel} allows the use of
multiplication on the \textit{Money} type, it's possible to multiply it by 0.
The order in which this happens shouldn't matter. Since the value of a
\textit{Money} variable is based on a decimal number, this property states that
the value will be exactly 0 (or 0.00 in the representation of a \textit{Money}
value). It should not contain any decimals that would make the amount bigger
than zero.
\clearpage % FORCE PAGE BREAK
% % % % % % % % % % % % %
% Subsection: Reflexivity
\subsection*{Reflexivity}
\label{ssct:properties_reflexivity}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula} & \textbf{Property name} & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x \equiv x$     & reflexiveEquality      & $x$ : Money              \\
                        $x \leq x$       & reflexiveInequalityLET & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF} $x \geq x$       & reflexiveInequalityGET & $x$ : Money              \\ \hline
\end{tabular}
\caption{Reflexivity when using \textit{Money}}
\label{tbl:ch4_money_reflexivity}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
%\pinfo{Equality, currency and amount}
The reflexive property is defined as a relation of a type with
itself~\cite{raftery2011perspective}. An instance of type \textit{Money} should
be equal to itself. The inequality relations \textit{smaller or equal to} and
\textit{greater or equal to} should hold too, as we can compare \textit{Money}
variables.

% % % % % % % % % % % % %
% Subsection: Symmetry
\subsection*{Symmetry}
\label{ssct:properties_symmetry}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                 & \textbf{Property name} & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x \equiv y \implies y \equiv x$ & symmetric              & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                  &                        & $y$ : Money              \\ \hline
\end{tabular}
\caption{Symmetry when using \textit{Money}}
\label{tbl:ch4_money_symmetry}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
%\pinfo{Equality, currency and amount}
\nameref{ssct:properties_reflexivity} described relations on the same variable
of the \textit{Money} type. When two different variables are used, the order
should not matter and thus it should work in both ways. Which is known as the
symmetric property~\cite{raftery2011perspective}.

% % % % % % % % % % % % %
% Subsection: Antisymmetry
\subsection*{Antisymmetry}
\label{ssct:properties_antisymmetry}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                              & \textbf{Property name} & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x \leq y \land y \leq x \implies x \equiv y$ & antisymmetryLET        & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                               &                        & $y$ : Money              \\
                        $x \geq y \land y \geq x \implies x \equiv y$ & antisymmetryGET        & $x$ : Money              \\
                                                                      &                        & $y$ : Money              \\ \hline
\end{tabular}
\caption{Antisymmetry when using \textit{Money}}
\label{tbl:ch4_money_antisymmetry}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
The antisymmetric relation describes that whenever there is a relation from
\textit{x} to \textit{y} and a relation from \textit{y} to \textit{x}, then
\textit{x} and \textit{y} should be equal. The
\textit{lower or equal than ($\leq$)} and
\textit{greater or equal than ($\geq$)} relations fit in this category, as shown
in \autoref{tbl:ch4_money_antisymmetry}. This antisymmetric relation is also
expected to hold, as the \textit{Money} type supports these operations.
\clearpage % FORCE PAGE BREAK
% % % % % % % % % % % % %
% Subsection: Transitivity
\subsection*{Transitivity}
\label{ssct:properties_transitivity}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                         \textbf{Formula}                                  & \textbf{Property name}  & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF}  $x \equiv y \land y \equiv z \implies x \equiv z$ & transitiveEquality      & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                         & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                         & $z$ : Money              \\
                         $x < y \land y < z \implies x < z$                & transitiveInequalityLT  & $x$ : Money              \\
                                                                           &                         & $y$ : Money              \\
                                                                           &                         & $z$ : Money              \\
\rowcolor[HTML]{EFEFEF}  $x > y \land y > z \implies x > z$                & transitiveInequalityGT  & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                         & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                         & $z$ : Money              \\
                         $x \leq y \land y \leq z \implies x \leq z$       & transitiveInequalityLET & $x$ : Money              \\
                                                                           &                         & $y$ : Money              \\
                                                                           &                         & $z$ : Money              \\
\rowcolor[HTML]{EFEFEF}  $x \geq y \land y \geq z \implies x \geq z$       & transitiveInequalityGET & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                         & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                         & $z$ : Money              \\ \hline
\end{tabular}
\caption{Transitivity when using \textit{Money}}
\label{tbl:ch4_money_transitivity}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
Operations can be done on the \textit{Money} types. The transitive
properties~\cite{raftery2011perspective} on the (in)equality operators should
still hold on the \textit{Money} type as we can compare the \textit{Money}
values.

% % % % % % % % % % % % %
% Subsection: Additivity
\subsection*{Additivity}
\label{ssct:properties_additivity}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                                          & \textbf{Property name}  & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x \equiv y \implies x + z \equiv y + z$                  & additiveEquality        & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                           &                         & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                           &                         & $z$ : Money              \\
                        $x \equiv y \land z \equiv a \implies x + z \equiv y + a$ & additiveEquality4params & $x$ : Money              \\
                                                                                  &                         & $y$ : Money              \\
                                                                                  &                         & $z$ : Money              \\
                                                                                  &                         & $a$ : Money              \\ \hline
\end{tabular}
\caption{Additivity when using \textit{Money}}
\label{tbl:ch4_money_additivity}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
Addition was earlier mentioned for the \nameref{ssct:properties_commutativity}
and \nameref{ssct:properties_associativity} properties. The properties mentioned
here extend these by defining properties that are true when the input values are
equal. When using the addition operator such that the resulting values on both
sides remain the same, as shown in \autoref{tbl:ch4_money_symmetry}, it should
not break the equality property on the resulting values.
\clearpage % FORCE PAGE BREAK
% % % % % % % % % % % % %
% Subsection: Division
\subsection*{Division}
\label{ssct:properties_division}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                             & \textbf{Property name} & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x \cdot y \equiv z \implies x \equiv z / y$ & division1              & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                              &                        & $y$ : Integer            \\
\rowcolor[HTML]{EFEFEF}                                              &                        & $z$ : Money              \\
                        $x \equiv z \cdot y \implies x / y \equiv z$ & division2              & $x$ : Money              \\
                                                                     &                        & $y$ : Integer            \\
                                                                     &                        & $z$ : Money              \\ \hline
\end{tabular}
\caption{Division when using \textit{Money}}
\label{tbl:ch4_money_division}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
When using division with the \textit{Money} type, it is not possible to use a
\textit{Money} value as the denominator. A \textit{Money} type can be dived by
an \textit{Integer}, thus we can define the division properties by using both
the \textit{Money} and \textit{Integer} type. Note that the denominator cannot
be zero, as division by zero is not possible. % Maybe theres a source for division by zero? :)

% % % % % % % % % % % % %
% Subsection: Trichotomy
\subsection*{Trichotomy}
\label{ssct:properties_trichotomy}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                   & \textbf{Property name} & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x < y \lor x \equiv y \lor x > y$ & trichotomy             & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                    &                        & $y$ : Money              \\ \hline
\end{tabular}
\caption{Trichotomy when using \textit{Money}}
\label{tbl:ch4_money_trichotomy}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
The law of trichotomy defines that for every pair of arbitrary real numbers,
exactly one of the relations \textit{$<$}, \textit{==}, \textit{$>$} holds. We
can define a property for this when using \textit{Money}, as shown in
\autoref{tbl:ch4_money_trichotomy}.
\clearpage % FORCE PAGE BREAK
% % % % % % % % % % % % %
% Subsection: Additional properties of equality and inequality
\subsection{Additional properties of equality and inequality}
\label{ssct:properties_definitions_additionalproperties}
For the third experiment (\autoref{cpt:experiment3}), the property definitions for division have been updated and additional properties have
been added to the list of defined properties. These extra properties can be put in the category of equality and
inequality properties and are using the implication ($\implies$) sign in its
definitions.

% % % % % % % % % % % % %
% Subsection: Division (Updated)
\subsection*{Division}
\label{ssct:properties_division_updated}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                                        & \textbf{Property name} & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} round($x \cdot y$) $\equiv$ round($z$) $\implies$
                                       round($x$) $\equiv$ round($z / y$)       & divisionEquality1      & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                         &                        & $y$ : Integer            \\
\rowcolor[HTML]{EFEFEF}                                                         &                        & $z$ : Money              \\
                        round($x$) $\equiv$ round($z \cdot y$) $\implies$
												                     round($x / y$) == round($z$)       & divisionEquality2      & $x$ : Money              \\
                                                                                &                        & $y$ : Integer            \\
                                                                                &                        & $z$ : Money              \\
\rowcolor[HTML]{EFEFEF} $x \equiv y \land z \neq 0 \implies x / z \equiv y / z$ & divisionEquality3      & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                         &                        & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                         &                        & $z$ : Integer            \\
												$x < y \land z > 0 \implies x / z < y / z$              & divisionInequalityLT1  & $x$ : Money              \\
																																			          &                        & $y$ : Money              \\
																																			          &                        & $z$ : Integer            \\
\rowcolor[HTML]{EFEFEF} $x < y \land z < 0 \implies x / z > y / z$              & divisionInequalityLT2  & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                         &                        & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                         &                        & $z$ : Integer            \\
												$x > y \land z > 0 \implies x / z > y / z$              & divisionInequalityGT1  & $x$ : Money              \\
                                                                                &                        & $y$ : Money              \\
                                                                                &                        & $z$ : Integer            \\
\rowcolor[HTML]{EFEFEF} $x > y \land z < 0 \implies x / z < y / z$              & divisionInequalityGT2  & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                         &                        & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                         &                        & $z$ : Integer            \\ \hline
\end{tabular}
\caption{Updated definition of Division when using \textit{Money}}
\label{tbl:properties_money_division_updated}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
The initial property definitions for \textit{Division} did not take the division
problem into account and thus had to be updated. The updated definitions are
using the \textit{round()} method to prevent the occurrence of the division
problem. The \textit{round()} method rounds the value to 4 decimals and uses the
``HALF\_UP'' rounding technique, this is described in more detail in \autoref{cpt:experiment3}.
In addition to this modification, more property
definitions have been added for division, as shown in
\autoref{tbl:properties_money_division_updated}.
\clearpage % FORCE PAGE BREAK
% % % % % % % % % % % % %
% Subsection: Additivity (Updated)
\subsection*{Additivity}
\label{ssct:properties_additivity_updated}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                                          & \textbf{Property name}  & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x \equiv y \implies x + z \equiv y + z$                  & additiveEquality        & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                           &                         & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                           &                         & $z$ : Money              \\
                        $x \equiv y \land z \equiv a \implies x + z \equiv y + a$ & additiveEquality4params & $x$ : Money              \\
                                                                                  &                         & $y$ : Money              \\
                                                                                  &                         & $z$ : Money              \\
                                                                                  &                         & $a$ : Money              \\
\rowcolor[HTML]{EFEFEF} $x < y \implies x + z < y + z$                            & additiveInequalityLT    & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                           &                         & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                           &                         & $z$ : Money              \\
                        $x > y \implies x + z > y + z$                            & additiveInequalityGT    & $x$ : Money              \\
                                                                                  &                         & $y$ : Money              \\
                                                                                  &                         & $z$ : Money              \\ \hline
\end{tabular}
\caption{Additivity when using \textit{Money}}
\label{tbl:properties_money_additivity_updated}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
For additivity, additional property definitions are added that use inequality,
as shown in \autoref{tbl:properties_money_additivity_updated}. The existing ones
(described in the first 2 rows) only used equality in its definitions.

% % % % % % % % % % % % %
% Subsection: Subtraction
\subsection*{Subtraction}
\label{ssct:properties_subtraction_updated}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                         & \textbf{Property name}  & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x \equiv y \implies x - z \equiv y - z$ & subtractiveEquality     & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                          &                         & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                          &                         & $z$ : Money              \\
                        $x < y \implies x - z < y - z$           & subtractiveInequalityLT & $x$ : Money              \\
                                                                 &                         & $y$ : Money              \\
                                                                 &                         & $z$ : Money              \\
\rowcolor[HTML]{EFEFEF} $x > y \implies x - z > y - z$           & subtractiveInequalityGT & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                          &                         & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                          &                         & $z$ : Money              \\ \hline
\end{tabular}
\caption{Subtraction when using \textit{Money}}
\label{tbl:properties_money_subtraction_updated}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
The property definitions concerning subtraction are kind of similar to those of
\nameref{ssct:properties_additivity_updated}. It uses subtraction instead of
addition in its definition. Nevertheless, to check whether the properties holds
for subtraction we defined these properties as shown in
\autoref{tbl:properties_money_subtraction_updated}.
\clearpage % FORCE PAGE BREAK
% % % % % % % % % % % % %
% Subsection: Multiplication
\subsection*{Multiplication}
\label{ssct:properties_multiplication_updated}
% Table
\begin{table}[!ht]
\centering
\begin{tabular}{lll}
\hline
                        \textbf{Formula}                                   & \textbf{Property name}      & \textbf{Variable (Type)} \\ \hline
\rowcolor[HTML]{EFEFEF} $x \equiv y \implies x \cdot z \equiv y \cdot z$   & multiplicativeEquality      & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                             & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                             & $z$ : Integer            \\
                        $x < y \land z > 0 \implies x \cdot z < y \cdot z$ & multiplicativeInequalityLT1 & $x$ : Money              \\
                                                                           &                             & $y$ : Money              \\
                                                                           &                             & $z$ : Integer            \\
\rowcolor[HTML]{EFEFEF} $x < y \land z < 0 \implies x \cdot z > y \cdot z$ & multiplicativeInequalityLT2 & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                             & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                             & $z$ : Integer            \\
                        $x > y \land z > 0 \implies x \cdot z > y \cdot z$ & multiplicativeInequalityGT1 & $x$ : Money              \\
                                                                           &                             & $y$ : Money              \\
                                                                           &                             & $z$ : Integer            \\
\rowcolor[HTML]{EFEFEF} $x > y \land z < 0 \implies x \cdot z < y \cdot z$ & multiplicativeInequalityGT2 & $x$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                             & $y$ : Money              \\
\rowcolor[HTML]{EFEFEF}                                                    &                             & $z$ : Integer            \\ \hline
\end{tabular}
\caption{Multiplication when using \textit{Money}}
\label{tbl:properties_money_multiplication_updated}
\end{table}
\FloatBarrier\noindent
% End table
% Reasoning
The property definitions for multiplication are looking similar to those of
\nameref{ssct:properties_division_updated}. The property definitions described
in \autoref{tbl:properties_money_multiplication_updated} are different in that
these use the multiplication operator along with the inequality symbols.

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
% Section: Conclusion
\section{Conclusion}
In this chapter, we focused on the properties when using the \textit{Money}
type in \textit{Rebel}. The research question lead as follows:\rqOne\\
\\
Since there was no definition available of the types in \textit{Rebel}, it was
required to define the properties in detail. Describing what the expected
behaviour is when operating with the types and which operations are allowed on
each type. In this chapter, we have defined a set of properties that are
expected to hold with \textit{Rebel}. These property definitions will be used in the experiments to test the generator.\\
\\
The properties are based on the axioms in algebra, but the requirements of
\textit{Rebel} have been taken into account when it comes to using certain
operations with certain types. The defined properties are separated into 2
categories: ``Field properties'' and ``Properties of equality and inequality''.
%An overview of the defined properties is shown in ...\todo{Add table}
%\footnote{The ellipsis after a property name is used to indicate that the
%property contains multiple definitions. Only the first part of this property
%name is shown for readability.}\\
%\\
%\textbf{// ADD TABLE}
\\
\\
The properties that are defined in this chapter will be used to test the
generator. However, it is not true that there are no bugs in the generator in
case every property holds. It does mean that there were no errors found in the
properties that are being checked. Many properties can be defined within the
\textit{Rebel} language, the properties defined in this chapter are certainly
not all the properties that exist in \textit{Rebel}.

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
% Section: Threats to validity
\section{Threats to validity}
% Lack of properties / missing properties
\subsubsection{Lack of properties}
We defined a set of properties that are expected to hold in \textit{Rebel}.
This can be seen as an incomplete set, as many more properties can hold and can
be expected when using \textit{Rebel}. The set of properties we defined are
aimed to cover many operations when using the \textit{Money} type, as this is
considered the most important type for a bank.\\
\\
We have used the axioms of algebra as inspiration for the property definitions
in this chapter. We did not specify \textit{Rebel}, as we have not defined all
the operators and all the important properties of it. This leads to a threat of
validity for the next chapters in that this affects the answer to our third
research question:\rqThree
A complete list of property definitions in
\textit{Rebel} could result in more bugs, and thus affect the answer to this
research question. For this, a profound study should be done on how
\textit{Rebel} works exactly, describing all the expected properties in
\textit{Rebel}.

% Invalid definitions
\subsubsection{Invalid definitions}
We defined some properties that are expected to hold on \textit{Rebel} types,
specifically when using the \textit{Money} type. We already discussed the lack
of properties, but it could be the case that some of our definitions are
invalid. We also assume that these properties do hold on \textit{Rebel}
types.\\
\\
Some might disagree with certain properties that we have defined, which leaves
this as a threat to the first research question:\rqOne But when this is the
case, the properties can be updated when needed. When we encounter a bug in our
experiments by using the properties in the following chapters, the designers or
implementers of \textit{Rebel} might disagree with the fact that it's a bug
(a false-positive). However, this issue is then getting known by using this
approach, which does not mark this as a major threat.

% Substituting properties
% Change 1: Alternative
% Change 2: Minimum number of
\subsubsection{Minimum number properties}
We defined many properties in this chapter. This might lead to questions like:
is this the minimal (or optimal) number of property definitions in order to
detect the bugs found in the experiments? Because having a minimal (or optimal) set of properties would mean that there are less tests needed to test the same thing, resulting in that less time is required to run the test framework. The answer to this question is no, this is out of scope
for this thesis. This leads to a threat to answering our third research
question:\rqThree\\
\\
Some of the defined properties might be overlapping each other. It might be possible to
lower the number of properties that have to be defined. However, the purpose of
each property on what it tests is different. So one should be careful when
determining some property unnecessary. For this thesis, we used known
axioms of algebra as inspiration and defined some properties for \textit{Rebel}.
